(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[931],{6093:function(e,t,l){Promise.resolve().then(l.bind(l,108))},108:function(e,t,l){"use strict";l.r(t),l.d(t,{default:function(){return em}});var s=l(7437),r=l(2265),a=l(5978),n=l(738),o=l(2148),c=l(4593);let i=()=>!0,d=()=>!!i()&&"localhost"===window.location.hostname&&!1,u={apiKey:"AIzaSyCARV8IDHbCGCCbJoujfTTPAV5Kg6T3jyY",authDomain:"rocketwords.firebaseapp.com",projectId:"rocketwords",storageBucket:"rocketwords.firebasestorage.app",messagingSenderId:"593323137015",appId:"1:593323137015:web:b11a12fe66037c070980f2",measurementId:"G-2VD9Q5V4JN"};if(i()){let e=Object.entries(u).filter(e=>{let[t,l]=e;return!l}).map(e=>{let[t]=e;return t});if(e.length>0)throw Error("Missing required Firebase environment variables: ".concat(e.join(", "),". ")+"Please check your .env.local file and ensure all Firebase configuration values are set.")}let m=null,x=null,p=null,b=null,g=null,f=()=>{if(!i())return{app:null,auth:null,db:null,googleProvider:null,analytics:null};if(m)return{app:m,auth:x,db:p,googleProvider:b,analytics:g};try{return m=(0,n.C6)().length?(0,n.C6)()[0]:(0,n.ZF)(u),x=(0,o.v0)(m),p=(0,a.ad)(m),(b=new o.hJ).setCustomParameters({prompt:"select_account"}),d()?(y(),g=null):h(m),{app:m,auth:x,db:p,googleProvider:b,analytics:g}}catch(e){throw console.error("❌ Firebase initialization failed:",e),e}},y=()=>{try{(0,o.S$)(x,"http://localhost:9099",{disableWarnings:!0}),(0,a.at)(p,"localhost",8080),console.log("✅ Firebase Emulators connected (Auth: 9099, Firestore: 8080)"),console.log("ℹ️ Skipping Analytics initialization in emulator mode")}catch(l){var e,t;(null===(e=l.message)||void 0===e?void 0:e.includes("already been called"))||(null===(t=l.message)||void 0===t?void 0:t.includes("already connected"))||(console.warn("⚠️ Firebase Emulators not available. Using production Firebase."),console.warn("To use emulators, run: firebase emulators:start"))}},h=e=>{try{g=(0,c.IH)(e),console.log("✅ Firebase Analytics initialized")}catch(e){console.warn("⚠️ Firebase Analytics initialization failed:",e),g=null}},v=f(),w=e=>()=>i()?v[e]||f()[e]:null,j=w("auth"),N=w("db"),E=w("googleProvider");w("analytics"),v.auth,v.db,v.googleProvider,v.analytics;let S=null,C=async(e,t,l)=>{try{let s=N();if(!s)throw Error("Firebase not initialized");let r=(0,a.JU)(s,"users",e,"gameData","levels"),n={levels:t,levelOrder:l,lastModified:a.EK.now()};await (0,a.pl)(r,n)}catch(e){throw console.error("Error syncing to Firestore:",e),e}},D=async(e,t,l,s)=>{try{let r=N();if(!r)throw Error("Firebase not initialized");let n=(0,a.JU)(r,"users",e,"gameData","levels"),o=await (0,a.QT)(n);if(!o.exists())return await C(e,t,l),{levels:t,levelOrder:l,lastModified:s};let c=o.data();if(!c.lastModified)return await C(e,t,l),{levels:t,levelOrder:l,lastModified:s};let i=c.lastModified.toMillis();if(s>i)return await C(e,t,l),{levels:t,levelOrder:l,lastModified:s};return{levels:c.levels,levelOrder:c.levelOrder||Object.keys(c.levels),lastModified:i}}catch(e){throw console.error("Error merging data:",e),e}},k=(e,t,l)=>{S&&S();let s=N();if(!s)return l(Error("Firebase not initialized")),()=>{};let r=(0,a.JU)(s,"users",e,"gameData","levels");return S=(0,a.cf)(r,e=>{if(e.exists()){let l=e.data();t(l.levels,l.levelOrder||Object.keys(l.levels),l.lastModified.toMillis())}},e=>{console.error("Error in auto-sync listener:",e),l(e)})},T=()=>{S&&(S(),S=null)},_=(0,r.createContext)(void 0),A={levels:{level1:{name:"Level 1",words:["the","am","we","look","i","is","to","here","mum","in"]},level2:{name:"Level 2",words:["dad","can","on","see","went","me","up","at","and","go"]}},levelOrder:["level1","level2"],currentWord:null,score:0,mode:null,currentWordList:[],currentLevelName:"",currentScreen:"welcome",isParentLoggedIn:!1,isUpperCase:!0,userId:null,syncStatus:"idle",lastModified:0},L=(e,t)=>{switch(t.type){case"LOAD_DATA":let{currentScreen:l,...s}=t.payload;return{...e,...s};case"SET_SCREEN":return{...e,currentScreen:t.payload};case"SET_MODE":return{...e,mode:t.payload};case"SET_CURRENT_WORD":return{...e,currentWord:t.payload};case"SET_SCORE":return{...e,score:t.payload};case"INCREMENT_SCORE":return{...e,score:e.score+10};case"SET_LEVEL_DATA":return{...e,currentLevelName:t.payload.levelName,currentWordList:t.payload.wordList};case"ADD_LEVEL":return{...e,levels:{...e.levels,[t.payload.key]:t.payload.level},levelOrder:[...e.levelOrder,t.payload.key],lastModified:Date.now()};case"REMOVE_LEVEL":let r={...e.levels};return delete r[t.payload],{...e,levels:r,levelOrder:e.levelOrder.filter(e=>e!==t.payload),lastModified:Date.now()};case"UPDATE_LEVEL_ORDER":return{...e,levelOrder:t.payload,lastModified:Date.now()};case"UPDATE_LEVEL_NAME":return{...e,levels:{...e.levels,[t.payload.key]:{...e.levels[t.payload.key],name:t.payload.name}},lastModified:Date.now()};case"ADD_WORD":return{...e,levels:{...e.levels,[t.payload.levelKey]:{...e.levels[t.payload.levelKey],words:[...e.levels[t.payload.levelKey].words,t.payload.word]}},lastModified:Date.now()};case"REMOVE_WORD":return{...e,levels:{...e.levels,[t.payload.levelKey]:{...e.levels[t.payload.levelKey],words:e.levels[t.payload.levelKey].words.filter(e=>e!==t.payload.word)}},lastModified:Date.now()};case"SET_PARENT_LOGIN":return{...e,isParentLoggedIn:t.payload};case"TOGGLE_CASE":return{...e,isUpperCase:!e.isUpperCase};case"RESET_GAME":return{...e,score:0,currentWord:null,mode:null,currentWordList:[],currentLevelName:""};case"SET_USER_ID":return{...e,userId:t.payload};case"SET_SYNC_STATUS":return{...e,syncStatus:t.payload};case"SYNC_LEVELS":return{...e,levels:t.payload.levels,levelOrder:t.payload.levelOrder,lastModified:t.payload.lastModified};case"UPDATE_LAST_MODIFIED":return{...e,lastModified:Date.now()};default:return e}},R=e=>{let{children:t}=e,[l,a]=(0,r.useReducer)(L,A),n=(0,r.useRef)(!1),o=(0,r.useRef)(!0),c=(0,r.useRef)("");(0,r.useRef)(null);let i=e=>{a({type:"SET_SYNC_STATUS",payload:e})};return(0,r.useEffect)(()=>{{let e=JSON.parse(localStorage.getItem("rocketWordsData")||"{}");e&&Object.keys(e).length>0&&a({type:"LOAD_DATA",payload:e})}},[]),(0,r.useEffect)(()=>{localStorage.setItem("rocketWordsData",JSON.stringify(l))},[l]),(0,r.useEffect)(()=>{if(!l.userId){T(),n.current=!1;return}if(!n.current)return(async()=>{try{var e;a({type:"SET_SYNC_STATUS",payload:"syncing"});let t=await D(l.userId,l.levels,l.levelOrder,null!==(e=l.lastModified)&&void 0!==e?e:Date.now());a({type:"SYNC_LEVELS",payload:t}),k(l.userId,(e,t,l)=>{a({type:"SYNC_LEVELS",payload:{levels:e,levelOrder:t,lastModified:l}}),i("synced")},e=>{console.error("Sync error:",e),i("error")}),i("synced"),n.current=!0}catch(e){console.error("Initial sync error:",e),a({type:"SET_SYNC_STATUS",payload:"error"})}})(),()=>{T()}},[l.userId,l.levels,l.lastModified]),(0,r.useEffect)(()=>{if(o.current){o.current=!1,c.current=JSON.stringify(l.levels);return}if(!l.userId||!n.current)return;let e=JSON.stringify(l.levels);if(c.current===e)return;c.current=e;let t=setTimeout(async()=>{if(l.userId)try{console.log("Starting sync..."),i("syncing");let e=C(l.userId,l.levels,l.levelOrder);await Promise.all([e,new Promise(e=>setTimeout(e,1e3))]),console.log("Sync completed, setting to synced"),i("synced")}catch(e){console.error("Sync error:",e),i("error")}},500);return()=>clearTimeout(t)},[l.levels,l.userId]),(0,s.jsx)(_.Provider,{value:{state:l,dispatch:a},children:t})},O=()=>{let e=(0,r.useContext)(_);if(!e)throw Error("useGame must be used within a GameProvider");return e},M=(0,r.createContext)(void 0),W=e=>{let{children:t}=e,[l,n]=(0,r.useState)(null),[c,i]=(0,r.useState)(!0),[d,u]=(0,r.useState)(null);(0,r.useEffect)(()=>{let e=j();if(!e){i(!1);return}return(0,o.Aj)(e,e=>{n(e),i(!1)})},[]);let m=e=>{let t="An error occurred";"auth/invalid-email"===e.code?t="Invalid email address":"auth/user-disabled"===e.code?t="This account has been disabled":"auth/user-not-found"===e.code?t="No account found with this email":"auth/wrong-password"===e.code?t="Incorrect password":"auth/email-already-in-use"===e.code?t="An account with this email already exists":"auth/weak-password"===e.code?t="Password should be at least 6 characters":"auth/popup-closed-by-user"===e.code?t="Sign-in popup was closed":"auth/cancelled-popup-request"===e.code?t="Sign-in cancelled":e.message&&(t=e.message),u(t)},x=async()=>{try{u(null),i(!0);let e=j(),t=E();if(!e||!t)throw Error("Firebase not initialized");await (0,o.rh)(e,t)}catch(e){m(e)}finally{i(!1)}},p=async(e,t)=>{try{u(null),i(!0);let l=j();if(!l)throw Error("Firebase not initialized");await (0,o.e5)(l,e,t)}catch(e){m(e)}finally{i(!1)}},b=async(e,t)=>{try{u(null),i(!0);let l=j();if(!l)throw Error("Firebase not initialized");await (0,o.Xb)(l,e,t)}catch(e){m(e)}finally{i(!1)}},g=async e=>{try{u(null);let t=j();if(!t)throw Error("Firebase not initialized");await (0,o.LS)(t,e)}catch(e){m(e)}},f=async()=>{try{u(null);let e=j();if(!e)throw Error("Firebase not initialized");await (0,o.w7)(e)}catch(e){m(e)}},y=async()=>{try{if(u(null),l){let e=N(),t=j();if(!e||!t)throw Error("Firebase not initialized");let s=(0,a.JU)(e,"users",l.uid,"gameData","levels");await (0,a.oe)(s),await (0,o.h8)(l)}}catch(e){m(e)}};return(0,s.jsx)(M.Provider,{value:{user:l,loading:c,error:d,signInWithGoogle:x,signInWithEmailPassword:p,signUpWithEmailPassword:b,resetPassword:g,signOut:f,deleteAccount:y,clearError:()=>{u(null)}},children:t})},I=()=>{let e=(0,r.useContext)(M);if(!e)throw Error("useAuth must be used within an AuthProvider");return e};function P(){let{state:e,dispatch:t}=O();return"welcome"!==e.currentScreen?null:(0,s.jsxs)("div",{className:"flex flex-col items-center justify-center p-4 sm:p-6 md:p-8 h-full w-full transition-opacity duration-500",children:[(0,s.jsxs)("div",{className:"flex flex-col items-center justify-center h-full w-full",children:[(0,s.jsx)("h1",{className:"text-2xl sm:text-3xl md:text-4xl lg:text-6xl font-extrabold text-white mb-4 sm:mb-6 md:mb-8 leading-tight",children:"\uD83D\uDE80\xa0Rocket\xa0Words!\xa0⭐"}),(0,s.jsx)("p",{className:"text-base sm:text-lg md:text-xl text-gray-300 mb-6 sm:mb-8 md:mb-10 max-w-md text-center px-4",children:"Let's learn some new words! Are you ready for an adventure?"}),(0,s.jsx)("div",{className:"flex flex-col md:flex-row gap-3 sm:gap-4",children:(0,s.jsx)("button",{onClick:()=>{t({type:"SET_SCREEN",payload:"level"})},className:"btn-game px-6 sm:px-8 py-3 sm:py-4 rounded-full text-lg sm:text-xl md:text-2xl font-bold text-white bg-blue-500 hover:bg-blue-600 transition-colors duration-300",children:"Start \uD83D\uDE80"})})]}),(0,s.jsxs)("button",{onClick:()=>{t({type:"SET_SCREEN",payload:"parentLogin"})},className:"absolute bottom-3 left-3 sm:bottom-4 sm:left-4 px-3 py-2 sm:px-4 sm:py-3 rounded-full text-gray-400 bg-gray-700 hover:bg-gray-600 transition-colors flex items-center gap-2",title:"Parent Settings","aria-label":"Open parent settings",children:[(0,s.jsx)("span",{className:"text-sm sm:text-base font-medium",children:"Parent"}),(0,s.jsx)("span",{className:"text-lg sm:text-xl md:text-2xl",children:"⚙️"})]})]})}let U=e=>{let t=[...e];for(let e=t.length-1;e>0;e--){let l=Math.floor(Math.random()*(e+1));[t[e],t[l]]=[t[l],t[e]]}return t},F=function(e,t){let l=arguments.length>2&&void 0!==arguments[2]?arguments[2]:4;if(0===t.length)return[];let s=U([...t]).slice(0,l);if(!s.includes(e)){let t=Math.floor(Math.random()*s.length);s[t]=e}return U(s)},V=e=>U(e.split("").map((e,t)=>({letter:e,id:"".concat(e,"-").concat(t)}))),G=(e,t)=>"i"===e.toLowerCase()?"I":t?e.toUpperCase():e.toLowerCase(),z=(e,t)=>t?e.toUpperCase():e.toLowerCase(),Y=(e,t)=>(t||Object.keys(e)).filter(t=>void 0!==e[t]);function K(e){let{onClick:t,className:l=""}=e;return(0,s.jsx)("button",{onClick:t,className:"btn-game absolute bottom-4 left-4 sm:bottom-6 sm:left-6 px-4 sm:px-6 py-2 rounded-full text-sm font-bold text-gray-400 bg-gray-700 hover:bg-gray-600 transition-colors ".concat(l),children:"Go Back ↩️"})}function J(){let{state:e,dispatch:t}=O(),l=l=>{"all-levels"===l?t({type:"SET_LEVEL_DATA",payload:{levelName:"All Levels",wordList:Object.values(e.levels).reduce((e,t)=>e.concat(t.words),[])}}):t({type:"SET_LEVEL_DATA",payload:{levelName:e.levels[l].name,wordList:e.levels[l].words}}),t({type:"SET_CURRENT_WORD",payload:null}),t({type:"SET_SCREEN",payload:"mode"})};return"level"!==e.currentScreen?null:(0,s.jsxs)("div",{className:"flex flex-col items-center justify-center p-4 sm:p-6 md:p-8 h-full w-full transition-opacity duration-500",children:[(0,s.jsx)("h2",{className:"text-2xl sm:text-3xl md:text-4xl font-extrabold text-purple-400 mb-4 sm:mb-6 md:mb-8 text-center",children:"Choose your adventure!"}),(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3 sm:gap-4 md:gap-6 w-full max-w-xl mb-8 sm:mb-12",children:[Y(e.levels,e.levelOrder).map(t=>(0,s.jsx)("button",{onClick:()=>l(t),className:"btn-game btn-level px-4 sm:px-6 py-3 sm:py-4 rounded-2xl text-lg sm:text-xl font-bold hover:scale-105",children:e.levels[t].name},t)),(0,s.jsx)("button",{onClick:()=>l("all-levels"),className:"btn-game px-4 sm:px-6 py-3 sm:py-4 rounded-2xl text-lg sm:text-xl font-bold hover:scale-105 bg-blue-500 hover:bg-blue-600",children:"All Levels"})]}),(0,s.jsx)(K,{onClick:()=>{t({type:"SET_SCREEN",payload:"welcome"})}})]})}function B(){let{state:e,dispatch:t}=O(),l=e=>{t({type:"SET_MODE",payload:e}),t({type:"SET_SCREEN",payload:"game"})};return"mode"!==e.currentScreen?null:(0,s.jsxs)("div",{className:"flex flex-col items-center justify-center p-4 sm:p-6 md:p-8 h-full w-full transition-opacity duration-500",children:[(0,s.jsx)("h2",{className:"text-2xl sm:text-3xl md:text-4xl font-extrabold text-purple-400 mb-4 sm:mb-6 md:mb-8 text-center",children:"How do you want to play?"}),(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-3 sm:gap-4 md:gap-6 w-full max-w-2xl mb-8 sm:mb-12",children:[(0,s.jsxs)("button",{onClick:()=>l("listen"),className:"btn-game btn-mode px-4 sm:px-6 py-6 sm:py-8 rounded-2xl text-lg sm:text-xl md:text-2xl font-bold hover:scale-105",children:[(0,s.jsx)("span",{className:"text-2xl sm:text-3xl md:text-4xl mb-1 sm:mb-2",children:"\uD83D\uDC42"}),(0,s.jsx)("br",{}),"Listen"]}),(0,s.jsxs)("button",{onClick:()=>l("read"),className:"btn-game btn-mode px-4 sm:px-6 py-6 sm:py-8 rounded-2xl text-lg sm:text-xl md:text-2xl font-bold hover:scale-105",children:[(0,s.jsx)("span",{className:"text-2xl sm:text-3xl md:text-4xl mb-1 sm:mb-2",children:"\uD83D\uDCD6"}),(0,s.jsx)("br",{}),"Read"]}),(0,s.jsxs)("button",{onClick:()=>l("write"),className:"btn-game btn-mode px-4 sm:px-6 py-6 sm:py-8 rounded-2xl text-lg sm:text-xl md:text-2xl font-bold hover:scale-105",children:[(0,s.jsx)("span",{className:"text-2xl sm:text-3xl md:text-4xl mb-1 sm:mb-2",children:"✍️"}),(0,s.jsx)("br",{}),"Write"]})]}),(0,s.jsx)(K,{onClick:()=>{t({type:"SET_SCREEN",payload:"level"})}})]})}let H=e=>{let{state:t,dispatch:l}=O(),{onPlayWord:s,onWordSelected:a,onEmptyWordList:n}=e,o=(0,r.useCallback)(e=>{let s;if(0===e.length)return null;do s=e[Math.floor(Math.random()*e.length)];while(s===t.currentWord&&e.length>1);return l({type:"SET_CURRENT_WORD",payload:s}),s},[l]),c=(0,r.useCallback)(()=>{t.currentWord&&s(t.currentWord)},[t.currentWord,s]);return{initializeGameMode:(0,r.useCallback)(()=>{let e=t.currentWordList;if(0===e.length)return null==n||n(),null;let l=o(e);return l?(null==a||a(l),l):null},[o,t.currentWordList,n,a]),playCurrentWord:c}};function q(){let{state:e,dispatch:t}=O();return(0,s.jsx)("button",{onClick:()=>{t({type:"TOGGLE_CASE"})},className:"btn-game btn-mode p-2 sm:p-3 rounded-full text-lg sm:text-xl md:text-2xl font-bold transition-all duration-200 transform hover:scale-105 active:scale-95 bg-blue-500 hover:bg-blue-600 text-white",title:"Switch to ".concat(e.isUpperCase?"lowercase":"uppercase"," letters"),children:e.isUpperCase?"Aa":"aA"})}let Q=()=>{let[e,t]=(0,r.useState)(null),[l,s]=(0,r.useState)(null);return(0,r.useEffect)(()=>{if("speechSynthesis"in window&&window.speechSynthesis){let e=window.speechSynthesis;t(e);let l=()=>{let t=e.getVoices();s(t.find(e=>e.name.includes("Google")&&e.lang.startsWith("en"))||t.find(e=>e.name.includes("Microsoft")&&e.lang.startsWith("en"))||t.find(e=>e.lang.startsWith("en-AU"))||t.find(e=>e.lang.startsWith("en-NZ"))||t.find(e=>e.lang.startsWith("en-GB"))||t.find(e=>e.lang.startsWith("en-US"))||t.find(e=>e.lang.startsWith("en"))||null)};e.onvoiceschanged=l,l()}},[]),{playWord:t=>{if("speechSynthesis"in window&&window.speechSynthesis&&e){e.cancel();let s=new SpeechSynthesisUtterance(t);l&&(s.voice=l),s.rate=.6,s.pitch=1.2,e.speak(s)}}}};function Z(){let{playWord:e}=Q(),{playCurrentWord:t}=H({onPlayWord:e});return(0,s.jsx)("button",{onClick:t,className:"btn-game btn-mode p-2 sm:p-3 md:p-4 rounded-full",children:(0,s.jsx)("span",{className:"text-2xl sm:text-3xl md:text-4xl lg:text-6xl",children:"\uD83D\uDDE3️"})})}function X(e){let{onFeedback:t,onPlayWord:l}=e,{state:a,dispatch:n}=O(),[o,c]=(0,r.useState)([]),[i,d]=(0,r.useState)(!1),[u,m]=(0,r.useState)(new Set),x=(0,r.useRef)(!1),p=(0,r.useCallback)(e=>{c(F(e,a.currentWordList,4)),d(!1),m(new Set),l(e)},[]),{initializeGameMode:b,playCurrentWord:g}=H({onPlayWord:l,onWordSelected:p,onEmptyWordList:(0,r.useCallback)(()=>{c([])},[])}),f=(0,r.useCallback)(()=>{b()},[b]),y=e=>{i||(e===a.currentWord?(n({type:"INCREMENT_SCORE"}),t(!0),d(!0),setTimeout(()=>{f()},1500)):(t(!1),m(t=>new Set(Array.from(t).concat(e)))))};return((0,r.useEffect)(()=>{x.current||(x.current=!0,f())},[]),0===a.currentWordList.length)?(0,s.jsx)("div",{className:"flex flex-col items-center justify-center w-full",children:(0,s.jsx)("p",{className:"text-xl",children:"ADD WORDS IN PARENT MODE!"})}):(0,s.jsxs)("div",{className:"flex flex-col items-center justify-center w-full",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2 sm:gap-3 md:gap-4 mb-4 sm:mb-6 md:mb-8",children:[(0,s.jsx)(Z,{}),(0,s.jsx)(q,{})]}),(0,s.jsx)("div",{className:"grid grid-cols-2 gap-2 sm:gap-3 md:gap-4 w-full max-w-xl",children:o.map((e,t)=>{let l=i||u.has(e);return(0,s.jsx)("button",{onClick:()=>y(e),disabled:l,className:"btn-game btn-answer p-3 sm:p-4 md:p-6 rounded-xl text-lg sm:text-xl md:text-2xl font-bold transition-all duration-200 transform hover:scale-105 active:scale-95 w-full md:w-auto ".concat(l?"opacity-50 cursor-not-allowed":""),children:G(e,a.isUpperCase)},"".concat(e,"-").concat(t))})})]})}function $(e){let{onFeedback:t,onPlayWord:l}=e,{state:a,dispatch:n}=O(),[o,c]=(0,r.useState)(""),[i,d]=(0,r.useState)(!1),u=(0,r.useRef)(!1),{initializeGameMode:m,playCurrentWord:x}=H({onPlayWord:l,onWordSelected:(0,r.useCallback)(e=>{c(G(e,a.isUpperCase)),d(!1)},[]),onEmptyWordList:(0,r.useCallback)(()=>{c("ADD WORDS IN PARENT MODE!")},[])}),p=(0,r.useCallback)(()=>{m()},[m]);return(0,r.useEffect)(()=>{u.current||(u.current=!0,p())},[]),(0,r.useEffect)(()=>{a.currentWord&&c(G(a.currentWord,a.isUpperCase))},[a.isUpperCase,a.currentWord]),(0,s.jsxs)("div",{className:"flex flex-col items-center justify-center w-full",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2 sm:gap-3 md:gap-4 mb-4 sm:mb-6 md:mb-8",children:[(0,s.jsx)(Z,{}),(0,s.jsx)(q,{})]}),(0,s.jsx)("div",{className:"p-4 sm:p-6 md:p-8 bg-gray-800 rounded-3xl w-full max-w-2xl text-center mb-4 sm:mb-6 md:mb-8 shadow-md",children:(0,s.jsx)("p",{className:"text-3xl sm:text-4xl md:text-5xl lg:text-7xl font-extrabold text-blue-400",children:o})}),(0,s.jsxs)("div",{className:"flex flex-row gap-2 sm:gap-3 md:gap-4",children:[(0,s.jsx)("button",{onClick:()=>{d(!0),n({type:"INCREMENT_SCORE"}),t(!0),setTimeout(p,1500)},disabled:i,className:"btn-game btn-answer px-6 sm:px-8 py-3 sm:py-4 rounded-full text-lg sm:text-xl md:text-2xl font-bold transition-all duration-200 transform hover:scale-105 active:scale-95 ".concat(i?"opacity-50 cursor-not-allowed":""),children:"I said it! \uD83C\uDF89"}),(0,s.jsx)("button",{onClick:()=>{p()},className:"btn-game btn-mode px-6 sm:px-8 py-3 sm:py-4 rounded-full text-lg sm:text-xl md:text-2xl font-bold transition-all duration-200 transform hover:scale-105 active:scale-95",children:"Next Word ➡️"})]})]})}function ee(e){let{onFeedback:t,onPlayWord:l}=e,{state:a,dispatch:n}=O(),[o,c]=(0,r.useState)(""),[i,d]=(0,r.useState)(""),[u,m]=(0,r.useState)([]),[x,p]=(0,r.useState)(!1),b=(0,r.useRef)(!1),{initializeGameMode:g,playCurrentWord:f}=H({onPlayWord:l,onWordSelected:(0,r.useCallback)(e=>{c(G(e,a.isUpperCase)),d(""),p(!1),m(V(e))},[]),onEmptyWordList:(0,r.useCallback)(()=>{c("ADD WORDS IN PARENT MODE!")},[])});(0,r.useCallback)(()=>{g()},[g]);let y=e=>{var l;if(x)return;let s=u.find(t=>t.id===e);if(!s)return;let r=null===(l=a.currentWord)||void 0===l?void 0:l[i.length];if(s.letter===r){let l=i+s.letter;d(l),m(t=>t.filter(t=>t.id!==e)),a.currentWord===l&&(n({type:"INCREMENT_SCORE"}),t(!0),p(!0),setTimeout(()=>{g()},1500))}else d(""),t(!1),a.currentWord&&m(V(a.currentWord))};return(0,r.useEffect)(()=>{b.current||(b.current=!0,g())},[]),(0,r.useEffect)(()=>{a.currentWord&&c(G(a.currentWord,a.isUpperCase))},[a.isUpperCase,a.currentWord]),(0,r.useEffect)(()=>{a.currentWord&&m(V(a.currentWord))},[a.currentWord]),(0,s.jsxs)("div",{className:"flex flex-col items-center justify-center w-full",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2 sm:gap-3 md:gap-4 mb-4 sm:mb-6 md:mb-8",children:[(0,s.jsx)(Z,{}),(0,s.jsx)(q,{})]}),(0,s.jsx)("div",{className:"flex flex-col items-center w-full max-w-xl",children:(0,s.jsxs)("div",{className:"p-4 sm:p-6 md:p-8 bg-gray-800 rounded-3xl w-full text-center mb-4 sm:mb-6 md:mb-8 shadow-md",children:[(0,s.jsx)("p",{className:"text-3xl sm:text-4xl md:text-5xl lg:text-7xl font-extrabold text-blue-400 mb-2 sm:mb-3 md:mb-4",children:o}),(0,s.jsx)("p",{className:"text-xl sm:text-2xl md:text-3xl lg:text-5xl font-extrabold text-purple-400 p-2 min-h-[2rem] sm:min-h-[3rem] md:min-h-[4rem]",children:(()=>{if(!a.currentWord)return"";let e=Array(a.currentWord.length).fill("_");for(let t=0;t<i.length;t++)e[t]=z(i[t],a.isUpperCase);return e.join(" ")})()})]})}),(0,s.jsx)("div",{className:"flex flex-wrap justify-center gap-1 sm:gap-2 mt-2 sm:mt-3 md:mt-4 min-h-[4rem] sm:min-h-[5rem] md:min-h-[6rem]",children:u.map(e=>(0,s.jsx)("button",{onClick:()=>y(e.id),disabled:x,className:"btn-game btn-answer px-5 sm:px-7 md:px-9 py-2 sm:py-3 md:py-4 rounded-xl text-xl sm:text-2xl md:text-3xl font-bold hover:scale-110 ".concat(x?"opacity-50 cursor-not-allowed":""),children:z(e.letter,a.isUpperCase)},e.id))})]})}let et=["Great!","Awesome!","You got it!","Good job!","Exactly!","You nailed it!","Fantastic!","Spot on!","You're on fire!"],el=["Good try!","Not quite!","Keep trying!","Don't give up!","So close!","Almost!","Think about this!","Give it another shot!"],es=e=>{let t=e?"✅":"❌",l=e?et:el;return{emoji:t,message:t+" "+l[Math.floor(Math.random()*l.length)]}},er=()=>{let[e,t]=(0,r.useState)(!1),[l,s]=(0,r.useState)("");return{showFeedback:e,feedbackMessage:l,showInlineFeedback:e=>{let{message:l}=es(e);s(l),t(!0),setTimeout(()=>{t(!1)},1500)}}};function ea(){let{state:e,dispatch:t}=O(),{playWord:l}=Q(),{showFeedback:r,feedbackMessage:a,showInlineFeedback:n}=er();return"game"!==e.currentScreen?null:(0,s.jsxs)("div",{className:"flex flex-col items-center justify-start p-4 sm:p-6 md:p-8 h-full w-full transition-opacity duration-500",children:[(0,s.jsxs)("div",{className:"flex justify-between items-center w-full max-w-xl mb-3 sm:mb-4 md:mb-6",children:[(0,s.jsx)("h2",{className:"text-lg sm:text-xl md:text-2xl lg:text-3xl font-bold text-gray-300",children:"".concat(e.currentLevelName," - ").concat({listen:"Listen",read:"Read",write:"Write"}[e.mode||""])}),(0,s.jsx)("div",{className:"relative",children:(0,s.jsxs)("span",{className:"text-sm sm:text-base md:text-lg lg:text-2xl font-bold text-green-400",children:["Score: ",e.score]})})]}),(0,s.jsxs)("div",{className:"flex-1 flex flex-col items-center justify-center w-full pb-16 sm:pb-20",children:["listen"===e.mode&&(0,s.jsx)(X,{onFeedback:n,onPlayWord:l},"listen"),"read"===e.mode&&(0,s.jsx)($,{onFeedback:n,onPlayWord:l},"read"),"write"===e.mode&&(0,s.jsx)(ee,{onFeedback:n,onPlayWord:l},"write")]}),(0,s.jsx)(K,{onClick:()=>{t({type:"SET_SCREEN",payload:"mode"})}}),r&&(0,s.jsx)("div",{className:"feedback",children:a})]})}function en(){let{state:e,dispatch:t}=O(),[l,a]=(0,r.useState)(0),[n,o]=(0,r.useState)(""),[c,i]=(0,r.useState)(""),d=()=>{a(Math.floor(900*Math.random())+100),o(""),i("")},u=e=>{if(n.length<3){let t=n+e;o(t),3===t.length&&m(t)}},m=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:n;parseInt(e,10)===l?(t({type:"SET_PARENT_LOGIN",payload:!0}),t({type:"SET_SCREEN",payload:"parentMode"}),o(""),i("")):(i("Incorrect number. Please try again."),d())};return((0,r.useEffect)(()=>{d()},[]),(0,r.useEffect)(()=>{"parentLogin"===e.currentScreen&&d()},[e.currentScreen]),"parentLogin"!==e.currentScreen)?null:(0,s.jsxs)("div",{className:"flex flex-col items-center justify-center p-4 sm:p-6 md:p-8 h-full w-full transition-opacity duration-500",children:[(0,s.jsx)("h2",{className:"text-2xl sm:text-3xl md:text-4xl font-extrabold text-purple-400 mb-4 sm:mb-6 text-center",children:"Parent Mode"}),(0,s.jsx)("p",{className:"text-base sm:text-lg text-gray-400 mb-3 sm:mb-4 text-center",children:"What's this number?"}),(0,s.jsx)("p",{className:"text-lg sm:text-xl font-bold mb-3 sm:mb-4 text-white text-center",children:(e=>{if(0===e)return"zero";let t=["","one","two","three","four","five","six","seven","eight","nine"],l="";return e>=100&&(l+=t[Math.floor(e/100)]+" hundred",(e%=100)>0&&(l+=" and ")),e>=20?(l+=["","","twenty","thirty","forty","fifty","sixty","seventy","eighty","ninety"][Math.floor(e/10)],(e%=10)>0&&(l+="-"+t[e])):e>=10?l+=["ten","eleven","twelve","thirteen","fourteen","fifteen","sixteen","seventeen","eighteen","nineteen"][e-10]:e>0&&(l+=t[e]),l.trim()})(l)}),(0,s.jsxs)("div",{className:"w-full max-w-xs text-center",children:[(0,s.jsx)("p",{className:"text-2xl sm:text-3xl md:text-4xl font-extrabold text-purple-400 tracking-widest mb-3 sm:mb-4",children:n.padEnd(3,"_").split("").join(" ")}),(0,s.jsxs)("div",{className:"grid grid-cols-3 gap-1 sm:gap-2",children:[[1,2,3,4,5,6,7,8,9].map(e=>(0,s.jsx)("button",{onClick:()=>u(e.toString()),className:"numeral-btn btn-game btn-mode px-3 sm:px-4 md:px-6 py-3 sm:py-4 text-lg sm:text-xl md:text-2xl rounded-lg",children:e},e)),(0,s.jsx)("button",{onClick:()=>{o("")},className:"btn-game px-3 sm:px-4 md:px-6 py-3 sm:py-4 text-sm sm:text-base md:text-lg rounded-lg bg-red-500 hover:bg-red-600 col-span-1",children:"Clear"}),(0,s.jsx)("button",{onClick:()=>u("0"),className:"numeral-btn btn-game btn-mode px-3 sm:px-4 md:px-6 py-3 sm:py-4 text-lg sm:text-xl md:text-2xl rounded-lg",children:"0"})]})]}),c&&(0,s.jsx)("p",{className:"text-red-400 text-sm mt-3 sm:mt-4 text-center mb-8 sm:mb-12",children:c}),(0,s.jsx)(K,{onClick:()=>{t({type:"SET_SCREEN",payload:"welcome"})}})]})}function eo(e){let{status:t,variant:l="inline"}=e,r=(()=>{switch(t){case"synced":return{icon:"✓",text:"Synced",color:"text-green-400",bgColor:"bg-green-500"};case"syncing":return{icon:"⟳",text:"Syncing",color:"text-blue-400 animate-spin",bgColor:"bg-blue-500"};case"offline":return{icon:"○",text:"Offline",color:"text-gray-400",bgColor:"bg-gray-500"};case"error":return{icon:"!",text:"Error",color:"text-red-400",bgColor:"bg-red-500"};case"idle":return{icon:"○",text:"Ready",color:"text-gray-400",bgColor:"bg-gray-500"};default:return null}})();return r?"pill"===l?(0,s.jsxs)("div",{className:"inline-flex items-center gap-2 px-3 py-1 rounded-full text-xs font-semibold text-white ".concat(r.bgColor),children:[(0,s.jsx)("span",{className:r.color.replace("text-","text-").replace("animate-spin",""),children:r.icon}),(0,s.jsx)("span",{children:r.text})]}):(0,s.jsxs)("div",{className:"flex items-center gap-2 text-sm",children:[(0,s.jsx)("span",{className:"text-lg ".concat(r.color),children:r.icon}),(0,s.jsx)("span",{className:"text-gray-300",children:r.text})]}):null}function ec(){let{state:e,dispatch:t}=O(),{user:l,deleteAccount:a,signOut:n,loading:o}=I(),[c,i]=(0,r.useState)(null),[d,u]=(0,r.useState)(""),[m,x]=(0,r.useState)(""),[p,b]=(0,r.useState)(""),[g,f]=(0,r.useState)(!1),[y,h]=(0,r.useState)(!1),[v,w]=(0,r.useState)(!1),[j,N]=(0,r.useState)(!1),E=(0,r.useRef)(null),S=(0,r.useRef)(null),C=(0,r.useRef)(null),D=(0,r.useRef)(null);(0,r.useEffect)(()=>{c&&e.levels[c]&&document.activeElement!==C.current&&x(e.levels[c].name)},[c,e.levels]),(0,r.useEffect)(()=>{if(c&&C.current&&!j){let e=setTimeout(()=>{if(C.current){C.current.focus();let e=C.current.value.length;C.current.setSelectionRange(e,e)}},100);return()=>clearTimeout(e)}},[c,j]);let k=l=>{Object.keys(e.levels).length>1&&(t({type:"REMOVE_LEVEL",payload:l}),c===l&&i(null),f(!1))},T=()=>{f(!1)},_=l=>{let s=m.trim();s&&e.levels[l]&&e.levels[l].name!==s&&(t({type:"UPDATE_LEVEL_NAME",payload:{key:l,name:s}}),x(s))},A=l=>{x(l.target.value),E.current&&clearTimeout(E.current),E.current=setTimeout(()=>{if(c){var l;let s=((null===(l=C.current)||void 0===l?void 0:l.value)||"").trim();s&&e.levels[c]&&e.levels[c].name!==s&&(t({type:"UPDATE_LEVEL_NAME",payload:{key:c,name:s}}),x(s))}},1e3)},L=()=>{E.current&&clearTimeout(E.current),c&&_(c)};(0,r.useEffect)(()=>()=>{E.current&&clearTimeout(E.current),S.current&&clearTimeout(S.current)},[]);let R=l=>{let s=p.trim();s&&e.levels[l]&&(s.split(/[,\s]+/).map(e=>e.trim().toLowerCase()).filter(e=>e.length>0).filter(t=>!e.levels[l].words.includes(t)).forEach(e=>{t({type:"ADD_WORD",payload:{levelKey:l,word:e}})}),b(""))},M=(e,l)=>{t({type:"REMOVE_WORD",payload:{levelKey:e,word:l}})},W=async()=>{try{await a(),w(!0),setTimeout(()=>{w(!1)},5e3)}catch(e){console.error("Error deleting account:",e)}h(!1)},P=Object.keys(e.levels).length>1,U=e=>{c===e?i(null):i(e)};return"parentMode"!==e.currentScreen?null:(0,s.jsxs)("div",{className:"flex flex-col items-center justify-start p-4 sm:p-6 md:p-8 h-full w-full transition-opacity duration-500 overflow-y-auto",style:{touchAction:"manipulation"},children:[(0,s.jsx)("h2",{className:"text-2xl sm:text-3xl md:text-4xl font-extrabold text-blue-400 mb-2 sm:mb-3 text-center",children:"Create Learning Adventures! \uD83D\uDCDA"}),(0,s.jsx)("p",{className:"text-sm sm:text-base text-gray-300 mb-4 sm:mb-6 text-center max-w-md",children:"Add words and create levels to help your child learn and grow! \uD83C\uDF1F"}),(0,s.jsxs)("div",{className:"w-full max-w-lg mb-4 sm:mb-6",children:[(0,s.jsxs)("div",{className:"flex justify-between items-center mb-3",children:[(0,s.jsx)("h3",{className:"text-lg sm:text-xl font-bold",children:"Manage Levels \uD83D\uDCDA"}),(0,s.jsxs)("span",{className:"text-sm text-gray-400 bg-gray-700 px-2 py-1 rounded-full",children:[Object.keys(e.levels).length," level",1!==Object.keys(e.levels).length?"s":""]})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[Y(e.levels,e.levelOrder).map(t=>{let l=e.levels[t],r=c===t,a=l.words||[];return(0,s.jsxs)("div",{className:"bg-gray-800 rounded-lg border-2 border-gray-600 overflow-hidden",children:[(0,s.jsx)("div",{className:"flex items-center justify-between p-3 cursor-pointer hover:bg-gray-700 transition-colors",onClick:()=>U(t),children:(0,s.jsxs)("div",{className:"flex items-center gap-2 flex-1 min-w-0",children:[(0,s.jsx)("span",{className:"transform transition-transform duration-200 ".concat(r?"rotate-90":""),children:"▶"}),(0,s.jsx)("span",{className:"font-medium text-gray-200 truncate",children:l.name}),(0,s.jsxs)("span",{className:"text-xs text-gray-400 bg-gray-700 px-2 py-1 rounded-full",children:[a.length," word",1!==a.length?"s":""]})]})}),r&&(0,s.jsxs)("div",{className:"border-t border-gray-600 p-3 space-y-3",children:[(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsx)("input",{ref:C,type:"text",value:m,onChange:A,onBlur:L,placeholder:"Level name",className:"w-full px-3 py-2 pr-10 rounded-lg border border-gray-600 focus:outline-none focus:border-blue-500 text-sm bg-gray-700 text-white"}),P&&!g&&(0,s.jsx)("button",{onClick:()=>f(!0),className:"absolute right-2 top-1/2 transform -translate-y-1/2 text-red-400 hover:text-red-300 p-1 rounded hover:bg-red-900/20 transition-colors",title:"Delete level",children:"✕"})]}),g&&(0,s.jsxs)("div",{className:"p-3 bg-red-900/20 border border-red-500/30 rounded-lg",children:[(0,s.jsxs)("p",{className:"text-sm text-red-300 mb-3",children:["Delete “",(0,s.jsx)("span",{className:"font-semibold",children:l.name}),"” and all ",a.length," word",1!==a.length?"s":"","?"]}),(0,s.jsxs)("div",{className:"flex gap-2 justify-end",children:[(0,s.jsx)("button",{onClick:T,className:"btn-game px-3 py-1 rounded-full text-xs font-bold text-gray-300 bg-gray-600 hover:bg-gray-500 transition-colors",children:"Cancel"}),(0,s.jsx)("button",{onClick:()=>k(t),className:"btn-game px-3 py-1 rounded-full text-xs font-bold text-white bg-red-500 hover:bg-red-600 transition-colors",children:"Delete ✕"})]})]}),0===a.length?(0,s.jsxs)("div",{className:"p-4 bg-gray-700 rounded-lg border-2 border-dashed border-gray-600 text-center",children:[(0,s.jsx)("p",{className:"text-gray-400 text-sm mb-2",children:"No words yet! \uD83C\uDF31"}),(0,s.jsx)("p",{className:"text-gray-500 text-xs",children:"Add your first word below to get started"})]}):(0,s.jsx)("div",{className:"bg-gray-700 p-3 rounded-lg border border-gray-600 max-h-48 overflow-y-auto",children:(0,s.jsx)("div",{className:"flex flex-wrap gap-2",children:a.map((l,r)=>(0,s.jsxs)("div",{className:"group relative inline-flex items-center px-3 py-1.5 bg-gray-600 rounded-full text-sm font-medium text-gray-200 hover:bg-gray-500 transition-colors",children:[(0,s.jsx)("span",{className:"pr-1",children:G(l,e.isUpperCase)}),(0,s.jsx)("button",{onClick:()=>M(t,l),className:"text-red-400 hover:text-red-300 font-bold text-xs p-0.5 rounded-full hover:bg-red-900/20 transition-colors",title:"Remove word",children:"✕"})]},r))})}),(0,s.jsxs)("div",{className:"flex gap-2 items-center",children:[(0,s.jsx)("input",{type:"text",value:p,onChange:e=>b(e.target.value),placeholder:"Words (space or comma separated)... ✍️",className:"flex-1 px-3 py-2 rounded-lg border-2 border-gray-600 focus:outline-none focus:border-blue-500 text-sm bg-gray-700 text-white"}),(0,s.jsx)("button",{onClick:()=>R(t),className:"btn-game px-3 py-2 rounded-full text-sm font-bold text-white bg-green-500 hover:bg-green-600 transition-colors",children:"Add ➕"})]})]})]},t)}),j&&(0,s.jsxs)("div",{className:"bg-gray-800 rounded-lg border-2 border-gray-600 overflow-hidden",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between p-3",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2 flex-1 min-w-0",children:[(0,s.jsx)("span",{className:"transform transition-transform duration-200 rotate-90",children:"▶"}),(0,s.jsx)("span",{className:"font-medium text-gray-200 truncate",children:"New Level"}),(0,s.jsx)("span",{className:"text-xs text-gray-400 bg-gray-700 px-2 py-1 rounded-full",children:"0 words"})]}),(0,s.jsx)("div",{className:"flex items-center gap-1",children:(0,s.jsx)("button",{onClick:()=>{N(!1),u("")},className:"btn-game px-3 py-1 rounded-full text-xs font-bold text-gray-300 bg-gray-600 hover:bg-gray-500 transition-colors",title:"Cancel",children:"Cancel"})})]}),(0,s.jsxs)("div",{className:"border-t border-gray-600 p-3 space-y-3",children:[(0,s.jsx)("div",{className:"flex gap-2 items-center",children:(0,s.jsx)("input",{ref:D,type:"text",value:d,onChange:e=>{let l=e.target.value;u(l),S.current&&clearTimeout(S.current),l.trim()&&(S.current=setTimeout(()=>{let e=l.trim();if(e){let l="level_".concat(Date.now());t({type:"ADD_LEVEL",payload:{key:l,level:{name:e,words:[]}}}),u(""),N(!1),i(l),x(e)}},2e3))},onBlur:()=>{S.current&&clearTimeout(S.current);let l=d.trim();if(l){if(Object.values(e.levels).find(e=>e.name===l)){let t=Object.keys(e.levels).find(t=>e.levels[t].name===l);t&&(i(t),x(l)),u(""),N(!1)}else{let e="level_".concat(Date.now());t({type:"ADD_LEVEL",payload:{key:e,level:{name:l,words:[]}}}),u(""),i(e),x(l),N(!1)}}else N(!1),u("")},placeholder:"Level name",className:"flex-1 px-3 py-2 rounded-lg border border-gray-600 focus:outline-none focus:border-blue-500 text-sm bg-gray-700 text-white",autoFocus:!0})}),(0,s.jsxs)("div",{className:"p-4 bg-gray-700 rounded-lg border-2 border-dashed border-gray-600 text-center",children:[(0,s.jsx)("p",{className:"text-gray-400 text-sm mb-2",children:"No words yet! \uD83C\uDF31"}),(0,s.jsx)("p",{className:"text-gray-500 text-xs",children:"Add your first word below to get started"})]}),(0,s.jsxs)("div",{className:"flex gap-2 items-center",children:[(0,s.jsx)("input",{type:"text",placeholder:"Words (space or comma separated)... ✍️",className:"flex-1 px-3 py-2 rounded-lg border-2 border-gray-600 focus:outline-none focus:border-blue-500 text-sm bg-gray-700 text-white",disabled:!0}),(0,s.jsx)("button",{className:"btn-game px-3 py-2 rounded-full text-sm font-bold text-gray-300 bg-gray-600 cursor-not-allowed",disabled:!0,children:"Add ➕"})]}),(0,s.jsx)("p",{className:"text-xs text-gray-500",children:"Save the level name first to add words"})]})]})]}),(0,s.jsx)("div",{className:"mt-4",children:(0,s.jsxs)("button",{onClick:()=>{N(!0),u(""),i(null)},className:"w-full px-4 py-3 rounded-lg border-2 border-dashed border-gray-600 text-gray-400 hover:text-gray-300 hover:border-gray-500 transition-colors flex items-center justify-center gap-2",children:[(0,s.jsx)("span",{className:"text-lg",children:"+"}),"Add New Level"]})})]}),(0,s.jsxs)("div",{className:"w-full max-w-lg mt-6 sm:mt-8 mb-8 sm:mb-12",children:[(0,s.jsx)("div",{className:"flex justify-between items-center mb-3",children:(0,s.jsx)("h3",{className:"text-lg sm:text-xl font-bold",children:"Cloud Backup ☁️"})}),l?(0,s.jsxs)("div",{className:"flex flex-col gap-3",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2 px-3 py-2 bg-gray-700 rounded-lg",children:[(0,s.jsx)("div",{className:"flex items-center justify-center w-4 h-4 flex-shrink-0",children:l?l.providerData.some(e=>"google.com"===e.providerId)?(0,s.jsx)("img",{src:"/assets/icons/google-logo.svg",alt:"Google",className:"w-4 h-4"}):"✉️":"\uD83D\uDD17"}),(0,s.jsx)("span",{className:"text-sm text-gray-300 truncate flex-1 min-w-0 text-left",children:l.email}),(0,s.jsx)("div",{className:"flex-shrink-0",children:(0,s.jsx)(eo,{status:e.syncStatus,variant:"pill"})})]}),y?(0,s.jsxs)("div",{className:"space-y-3",children:[(0,s.jsxs)("div",{className:"bg-yellow-900 border border-yellow-600 rounded-lg p-3",children:[(0,s.jsx)("p",{className:"text-center text-yellow-200 font-semibold mb-2 text-sm",children:"⚠️ This will permanently delete:"}),(0,s.jsxs)("ul",{className:"text-xs text-yellow-100 space-y-1",children:[(0,s.jsx)("li",{children:"• Your account information"}),(0,s.jsx)("li",{children:"• Your cloud backup, including levels and words"})]}),(0,s.jsx)("p",{className:"text-center text-yellow-300 font-bold mt-2 text-sm",children:"This cannot be undone!"})]}),(0,s.jsxs)("div",{className:"flex gap-2",children:[(0,s.jsx)("button",{onClick:W,className:"flex-1 btn-game px-3 py-2 rounded-lg text-sm font-bold text-white bg-red-600 hover:bg-red-700 transition-colors",children:"Yes, Delete"}),(0,s.jsx)("button",{onClick:()=>{h(!1)},className:"flex-1 btn-game px-3 py-2 rounded-lg text-sm font-bold text-white bg-gray-600 hover:bg-gray-500 transition-colors",children:"Cancel"})]})]}):(0,s.jsxs)("div",{className:"flex gap-2",children:[(0,s.jsx)("button",{onClick:()=>{n()},className:"btn-game px-3 py-2 rounded-lg text-sm font-bold text-white bg-gray-500 hover:bg-gray-600 transition-colors flex-1",children:"Sign Out"}),(0,s.jsx)("button",{onClick:()=>{h(!0)},className:"btn-game px-3 py-2 rounded-lg text-sm font-bold text-white bg-red-500 hover:bg-red-600 transition-colors flex-1",children:"Delete Account"})]})]}):(0,s.jsxs)("div",{className:"flex flex-col gap-3",children:[(0,s.jsxs)("div",{className:"bg-gray-800 border border-gray-600 rounded-lg p-4",children:[(0,s.jsx)("p",{className:"text-center text-gray-200 font-semibold mb-2 text-sm",children:"Link your account for cloud backup"}),(0,s.jsx)("p",{className:"text-xs text-gray-300 text-center",children:"Your words and levels will be backed up and synced across devices"})]}),(0,s.jsx)("button",{onClick:()=>{t({type:"SET_SCREEN",payload:"accountManagement"})},className:"btn-game px-4 py-3 rounded-lg text-sm font-bold text-white bg-blue-500 hover:bg-blue-600 transition-colors",children:"Link Account"})]})]}),v&&(0,s.jsxs)("div",{className:"w-full max-w-lg mb-4 sm:mb-6 p-4 bg-green-500 text-white rounded-lg text-center",children:[(0,s.jsxs)("div",{className:"flex items-center justify-center gap-2 mb-2",children:[(0,s.jsx)("span",{className:"text-xl",children:"✅"}),(0,s.jsx)("span",{className:"font-bold text-lg",children:"Account Deleted Successfully"})]}),(0,s.jsx)("p",{className:"text-sm text-green-100",children:"Your cloud account has been removed. You can continue managing words locally or link a new account anytime."})]}),(0,s.jsx)(K,{onClick:()=>{t({type:"SET_PARENT_LOGIN",payload:!1}),t({type:"RESET_GAME"}),t({type:"SET_SCREEN",payload:"welcome"})}})]})}function ei(){let{user:e,signInWithGoogle:t,signInWithEmailPassword:l,signUpWithEmailPassword:a,resetPassword:n,signOut:o,deleteAccount:c,error:i,clearError:d,loading:u}=I(),{state:m,dispatch:x}=O(),[p,b]=(0,r.useState)(!1),[g,f]=(0,r.useState)(!1),[y,h]=(0,r.useState)(""),[v,w]=(0,r.useState)(""),[j,N]=(0,r.useState)(""),[E,S]=(0,r.useState)(""),[C,D]=(0,r.useState)(""),[k,T]=(0,r.useState)(!1),_=async()=>{try{S(""),d(),await t()}catch(e){S(e.message)}},A=async e=>{if(e.preventDefault(),S(""),d(),!y||!v){S("Please enter email and password");return}try{await l(y,v),h(""),w("")}catch(e){S(e.message)}},L=async e=>{if(e.preventDefault(),S(""),d(),!y||!v||!j){S("Please fill in all fields");return}if(v!==j){S("Passwords do not match");return}if(v.length<6){S("Password must be at least 6 characters");return}try{await a(y,v),h(""),w(""),N("")}catch(e){S(e.message)}},R=async e=>{if(e.preventDefault(),S(""),d(),D(""),!y){S("Please enter your email address");return}try{await n(y),D("Password reset email sent! Check your inbox."),h(""),setTimeout(()=>{f(!1),D("")},3e3)}catch(e){S(e.message)}};if((0,r.useEffect)(()=>{"accountManagement"===m.currentScreen&&!u&&e&&x({type:"SET_SCREEN",payload:"parentMode"})},[e,u,x,m.currentScreen]),"accountManagement"!==m.currentScreen||e)return null;let M=i||E;return(0,s.jsxs)("div",{className:"flex flex-col items-center justify-start p-4 sm:p-6 md:p-8 h-full w-full transition-opacity duration-500 overflow-y-auto",children:[(0,s.jsx)("h2",{className:"text-2xl sm:text-3xl md:text-4xl font-extrabold text-blue-400 mb-4 sm:mb-6 text-center",children:"Account Management"}),M&&(0,s.jsx)("div",{className:"w-full max-w-lg mb-3 sm:mb-4 p-3 sm:p-4 bg-red-500 text-white rounded-lg text-sm sm:text-base",children:M}),C&&(0,s.jsx)("div",{className:"w-full max-w-lg mb-3 sm:mb-4 p-3 sm:p-4 bg-green-500 text-white rounded-lg text-sm sm:text-base",children:C}),(0,s.jsxs)("div",{className:"w-full max-w-lg space-y-3 sm:space-y-4 mb-8 sm:mb-12",children:[(0,s.jsx)("p",{className:"text-center text-gray-300 mb-3 sm:mb-4 text-sm sm:text-base",children:"Sign in to sync your levels across devices"}),g?(0,s.jsxs)("form",{onSubmit:R,className:"space-y-3 sm:space-y-4",children:[(0,s.jsx)("h3",{className:"text-lg sm:text-xl font-bold text-center",children:"Reset Password"}),(0,s.jsx)("input",{type:"email",value:y,onChange:e=>h(e.target.value),placeholder:"Email",className:"w-full px-3 sm:px-4 py-2 sm:py-3 rounded-lg border-2 border-gray-600 focus:outline-none focus:border-blue-500 text-base sm:text-lg bg-gray-700 text-white"}),(0,s.jsx)("button",{type:"submit",className:"w-full btn-game px-4 sm:px-6 py-2 sm:py-3 rounded-full text-base sm:text-lg font-bold text-white bg-blue-500 hover:bg-blue-600 transition-colors",children:"Send Reset Email"}),(0,s.jsx)("button",{type:"button",onClick:()=>{f(!1),h(""),S("")},className:"w-full text-gray-400 hover:text-gray-300 text-xs sm:text-sm",children:"Back to Sign In"})]}):p?(0,s.jsxs)("form",{onSubmit:L,className:"space-y-3 sm:space-y-4",children:[(0,s.jsx)("h3",{className:"text-lg sm:text-xl font-bold text-center",children:"Create Account"}),(0,s.jsx)("input",{type:"email",value:y,onChange:e=>h(e.target.value),placeholder:"Email",className:"w-full px-3 sm:px-4 py-2 sm:py-3 rounded-lg border-2 border-gray-600 focus:outline-none focus:border-blue-500 text-base sm:text-lg bg-gray-700 text-white"}),(0,s.jsx)("input",{type:"password",value:v,onChange:e=>w(e.target.value),placeholder:"Password (min 6 characters)",className:"w-full px-3 sm:px-4 py-2 sm:py-3 rounded-lg border-2 border-gray-600 focus:outline-none focus:border-blue-500 text-base sm:text-lg bg-gray-700 text-white"}),(0,s.jsx)("input",{type:"password",value:j,onChange:e=>N(e.target.value),placeholder:"Confirm Password",className:"w-full px-3 sm:px-4 py-2 sm:py-3 rounded-lg border-2 border-gray-600 focus:outline-none focus:border-blue-500 text-base sm:text-lg bg-gray-700 text-white"}),(0,s.jsx)("button",{type:"submit",className:"w-full btn-game px-4 sm:px-6 py-2 sm:py-3 rounded-full text-base sm:text-lg font-bold text-white bg-green-500 hover:bg-green-600 transition-colors",children:"Create Account"}),(0,s.jsx)("button",{type:"button",onClick:()=>{b(!1),w(""),N(""),S("")},className:"w-full text-gray-400 hover:text-gray-300 text-xs sm:text-sm",children:"Already have an account? Sign In"})]}):(0,s.jsxs)("div",{className:"space-y-3 sm:space-y-4",children:[(0,s.jsxs)("form",{onSubmit:A,className:"space-y-3 sm:space-y-4",children:[(0,s.jsx)("input",{type:"email",value:y,onChange:e=>h(e.target.value),placeholder:"Email",className:"w-full px-3 sm:px-4 py-2 sm:py-3 rounded-lg border-2 border-gray-600 focus:outline-none focus:border-blue-500 text-base sm:text-lg bg-gray-700 text-white"}),(0,s.jsx)("input",{type:"password",value:v,onChange:e=>w(e.target.value),placeholder:"Password",className:"w-full px-3 sm:px-4 py-2 sm:py-3 rounded-lg border-2 border-gray-600 focus:outline-none focus:border-blue-500 text-base sm:text-lg bg-gray-700 text-white"}),(0,s.jsx)("button",{type:"submit",className:"w-full btn-game px-4 sm:px-6 py-2 sm:py-3 rounded-full text-base sm:text-lg font-bold text-white bg-blue-500 hover:bg-blue-600 transition-colors",children:"Sign In"})]}),(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsx)("div",{className:"absolute inset-0 flex items-center",children:(0,s.jsx)("div",{className:"w-full border-t border-gray-600"})}),(0,s.jsx)("div",{className:"relative flex justify-center text-xs sm:text-sm",children:(0,s.jsx)("span",{className:"px-2 bg-gray-800 text-gray-400",children:"OR"})})]}),(0,s.jsxs)("button",{onClick:_,className:"w-full btn-game px-4 sm:px-6 py-2 sm:py-3 rounded-full text-base sm:text-lg font-bold text-white bg-red-500 hover:bg-red-600 transition-colors flex items-center justify-center gap-2",children:[(0,s.jsxs)("svg",{className:"w-4 h-4 sm:w-5 sm:h-5",viewBox:"0 0 24 24",children:[(0,s.jsx)("path",{fill:"currentColor",d:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"}),(0,s.jsx)("path",{fill:"currentColor",d:"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"}),(0,s.jsx)("path",{fill:"currentColor",d:"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"}),(0,s.jsx)("path",{fill:"currentColor",d:"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"})]}),"Sign in with Google"]}),(0,s.jsxs)("div",{className:"flex justify-between text-xs sm:text-sm",children:[(0,s.jsx)("button",{type:"button",onClick:()=>{b(!0),S("")},className:"text-blue-400 hover:text-blue-300",children:"Create Account"}),(0,s.jsx)("button",{type:"button",onClick:()=>{f(!0),S("")},className:"text-gray-400 hover:text-gray-300",children:"Forgot Password?"})]})]})]}),(0,s.jsx)(K,{onClick:()=>{x({type:"SET_SCREEN",payload:"parentMode"})}})]})}function ed(){return(0,s.jsx)("div",{className:"feedback",id:"feedback","data-testid":"feedback"})}function eu(){let{state:e,dispatch:t}=O(),{user:l}=I();return(0,r.useEffect)(()=>{l?t({type:"SET_USER_ID",payload:l.uid}):t({type:"SET_USER_ID",payload:null})},[l,t]),(0,s.jsx)("div",{className:"min-h-screen flex items-center justify-center p-4",style:{touchAction:"manipulation"},children:(0,s.jsxs)("div",{className:"container-bg rounded-[3rem] p-8 md:p-12 w-full max-w-4xl min-h-[70vh] flex flex-col items-center text-center relative shadow-xl",style:{touchAction:"manipulation"},children:[(0,s.jsx)(P,{}),(0,s.jsx)(J,{}),(0,s.jsx)(B,{}),(0,s.jsx)(ea,{}),(0,s.jsx)(en,{}),(0,s.jsx)(ec,{}),(0,s.jsx)(ei,{}),(0,s.jsx)(ed,{})]})})}function em(){return(0,s.jsx)(W,{children:(0,s.jsx)(R,{children:(0,s.jsx)(eu,{})})})}}},function(e){e.O(0,[15,609,605,971,117,744],function(){return e(e.s=6093)}),_N_E=e.O()}]);